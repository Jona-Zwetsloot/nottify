var e={},r=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,a=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,n=/\\([\u000b\u0020-\u00ff])/g,o=/([\\"])/g,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,f=e.format=function(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var r=e.parameters,t=e.type;if(!t||!i.test(t))throw new TypeError("invalid type");var n=t;if(r&&"object"==typeof r)for(var o,f=Object.keys(r).sort(),u=0;u<f.length;u++){if(o=f[u],!a.test(o))throw new TypeError("invalid parameter name");n+="; "+o+"="+p(r[o])}return n},u=e.parse=function(e){if(!e)throw new TypeError("argument string is required");var t="object"==typeof e?function(e){var r;"function"==typeof e.getHeader?r=e.getHeader("content-type"):"object"==typeof e.headers&&(r=e.headers&&e.headers["content-type"]);if("string"!=typeof r)throw new TypeError("content-type header is missing from object");return r}(e):e;if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var a=t.indexOf(";"),o=-1!==a?t.slice(0,a).trim():t.trim();if(!i.test(o))throw new TypeError("invalid media type");var f=new s(o.toLowerCase());if(-1!==a){var u,p,y;for(r.lastIndex=a;p=r.exec(t);){if(p.index!==a)throw new TypeError("invalid parameter format");a+=p[0].length,u=p[1].toLowerCase(),34===(y=p[2]).charCodeAt(0)&&-1!==(y=y.slice(1,-1)).indexOf("\\")&&(y=y.replace(n,"$1")),f.parameters[u]=y}if(a!==t.length)throw new TypeError("invalid parameter format")}return f};
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
function p(e){var r=String(e);if(a.test(r))return r;if(r.length>0&&!t.test(r))throw new TypeError("invalid parameter value");return'"'+r.replace(o,"\\$1")+'"'}function s(e){this.parameters=Object.create(null),this.type=e}export{e as default,f as format,u as parse};